<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:GestionAdministrative.ViewModels"
             x:Class="GestionAdministrative.Views.ClientDetailPage"
             x:DataType="viewmodels:ClientDetailViewModel"
             Title="{Binding Title}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            
            <ActivityIndicator IsRunning="{Binding IsBusy}" 
                             IsVisible="{Binding IsBusy}"
                             Color="{StaticResource Primary}"/>

            <!-- Message d'erreur -->
            <Frame IsVisible="{Binding HasError}"
                   BackgroundColor="LightPink"
                   Padding="10">
                <Label Text="{Binding ErrorMessage}" TextColor="Red"/>
            </Frame>

            <!-- Formulaire -->
            <Label Text="Nom *" FontAttributes="Bold"/>
            <Entry Text="{Binding Client.Nom}" Placeholder="Nom du client"/>

            <Label Text="Email *" FontAttributes="Bold"/>
            <Entry Text="{Binding Client.Email}" 
                   Placeholder="email@example.com"
                   Keyboard="Email"/>

            <Label Text="Téléphone" FontAttributes="Bold"/>
            <Entry Text="{Binding Client.Telephone}" 
                   Placeholder="+33 6 12 34 56 78"
                   Keyboard="Telephone"/>

            <Label Text="Adresse" FontAttributes="Bold"/>
            <Editor Text="{Binding Client.Adresse}" 
                    Placeholder="Adresse complète"
                    HeightRequest="100"/>

            <Label Text="SIREN" FontAttributes="Bold"/>
            <Entry Text="{Binding Client.SIREN}" 
                   Placeholder="123 456 789"
                   Keyboard="Numeric"
                   MaxLength="14"/>

            <Label Text="Notes" FontAttributes="Bold"/>
            <Editor Text="{Binding Client.Notes}" 
                    Placeholder="Notes supplémentaires"
                    HeightRequest="100"/>

            <!-- Boutons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,20,0,0">
                <Button Grid.Column="0"
                        Text="Annuler"
                        Command="{Binding CancelCommand}"
                        BackgroundColor="Gray"/>
                
                <Button Grid.Column="1"
                        Text="Enregistrer"
                        Command="{Binding SaveCommand}"
                        BackgroundColor="{StaticResource Primary}"/>
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
